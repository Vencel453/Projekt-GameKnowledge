<div *ngIf="gameData" class="title">
    <h1>{{gameData.title}}</h1>
    <h2 id="altTitle" *ngIf="gameData.altTitle">{{gameData.altTitle}}</h2>
</div>
<hr class="dividerline">

<div class="firstsection">
    <div *ngIf="gameData" class="leftpanel">
        <img *ngIf="gameData" [src]="gameData.boxart" alt="{{gameData.title}}" class="boxart"/>
        <p class="release">
            Release: {{gameData.release}}
        </p>

        <div class="studios">
            <span *ngIf="gameData.developers?.length">
               <strong>Developers: {{developerslist}}</strong>
            </span>
            <br>
            <span *ngIf="gameData.publishers?.length">
               <strong>Publishers: {{publisherslist}}</strong>
            </span>
        </div>

        <div class="ageratings">
            <div *ngFor="let agerating of gameData.agerating">
                <img class="icon" [src]="agerating.url" alt="{{agerating.institution}} {{agerating.rating}}"/>
            </div>
        </div>
    </div>

    <div *ngIf="gameData" class="rightpanel">
        <p class="description">{{gameData.description}}</p>
        <br>
        <div class="ratingsection">
            <div class="progress">
                <ng-container *ngIf="ratingProgress; else noRating">
                <div class="progress-bar bg-danger" [style.width]="ratingProgress.negative">{{ratingProgress.negative}}</div>
                <div class="progress-bar bg-success" [style.width]="ratingProgress.positive">{{ratingProgress.positive}}</div>
            </ng-container>
            <ng-template #noRating>
                <div class="progress-bar bg-secondary
                d-felx justify-content-center
                align-itmes-center" style="width: 100%;">
                    No ratings yet
                </div>
            </ng-template>
            </div>
        </div>
            <br>
        <div class="rategame">
        <button class="optionbuttons" id="ratethegame" (click)="RateGame()">Rate the game!</button>
        </div>

        <button class="optionbuttons" id="addtofavourites" (click)="AddtoFavourites()">Add to favourites! <img id="favouritehearth" src="./hearth.png" alt="hearth"></button>
        <br>
        <div class="gallery" *ngIf="gameData.gallery.length > 0">
            <h3 id="gallery">Gallery</h3>
            <hr class="dividerline">
            <div class="images">
                <div class="item" *ngFor="let img of gameData.gallery">
                    <img apppicturenotfound [src]="img.url" alt="Gallery image" (click)="openIMG(img.url)" />
                </div>
            </div>
        </div>

        <div class="modaloverlay" *ngIf="selectedImg" (click)="closeIMG()">
            <div class="modalcontent" (click)="$event.stopPropagation()">
                <img [src]="selectedImg" alt="Larged IMG" />
                <button class="close" (click)="closeIMG()">X</button>
            </div>
        </div>

    </div>
</div>
    <hr class="dividerline">

    <div class="secondsection">
    <div class="genres">
        <h3>Genres</h3>
        <br>
        <div class="genreslist">
            <span *ngFor="let genre of gameData.genres" class="genretag">
                {{genre.tag}}
            </span>
        </div>
    </div>

    <div class="controllersupport">
        <h3>Controller Support(PC)</h3>
        <br>
        <div class="controllers">
            <ng-container [ngSwitch]="gameData.controllerSupport">
                <div *ngSwitchCase="3" class="controllericons">
                    <img src="./XBox.png" alt="Xbox"><p class="controllertext">Xbox controller</p>
                    <img src="./PSdualsense.png" alt="dualsense"><p class="controllertext">Playstation Dualsense(USB)</p>
                    <img src="./PSdualshock.png" alt="dualshock"><p class="controllertext">Playstation Dualshock(USB)</p>
                </div>
                <div *ngSwitchCase="1" class="controllericons">
                    <img src="./XBox.png" alt="Xbox"><p class="controllertext">Xbox controller</p>
                </div>
                <div *ngSwitchCase="2" class="controllericons">
                    <img src="./XBox.png" alt="Xbox"><p class="controllertext">Xbox controller</p>
                    <img src="./PSdualsensehalf.png" alt="dualsensehalf"><p class="controllertext">Partial playstation dualsense controller support</p>
                    <img src="./PSdualshockhalf.png" alt="dualshockhalf"><p class="controllertext">Partial playstation dualshock controller support</p>
                </div>
                <div *ngSwitchDefault>
                    <p id="noCsupport">No controller support or console exclusive.</p>
                </div>
            </ng-container>
        </div>
    </div>
</div>

<hr class="dividerline">

<div class="thirdsection" *ngIf="gameData?.awards">
    <div class="nominations" *ngIf="gameData.awards.nominations?.length">
        <h3>Nominations</h3>
        <br>
        <div class="item" *ngFor="let nomination of gameData.awards.nominations">
            <img src="./awardnominated.png" alt="nominated" class="icon">
            <span class="year">{{nomination['Games.Gamesaward.year']}}</span>
            <span class="organizer">{{nomination.organizer}}</span>
            <span class="category">{{nomination.name}}</span>
        </div>
    </div>

    <div class="wins" *ngIf="gameData.awards.wins?.length">
        <h3>Wins</h3>
        <br>
        <div class="item" *ngFor="let win of gameData.awards.wins">
            <img src="./awardwinner.png" alt="winner" class="icon">
            <span class="year">{{win['Games.Gamesaward.year']}}</span>
            <span class="organizer">{{win.organizer}}</span>
            <span class="category">{{win.name}}</span>
        </div>
    </div>
</div>

<hr class="dividerline">

<div class="fourthsection">
    <div class="languages" *ngIf="voicesLanguages.length || subtitlesLanguages.length">
        <h3>Supported Languages</h3>
        <div class="Vlanguages" *ngIf="voicesLanguages.length">
            <h4>Voice</h4>
            <ul>
                <li *ngFor="let lang of displayedVlanguages">
                    <img [src]="languageFlagMap[lang.toLowerCase()]" [alt]="lang + ' flag'" class="flagicon">
                    {{lang | titlecase}}
                </li>
            </ul>
            <div class="dot3" *ngIf="!showFullFourthSection && voicesLanguages.length > visibleVlanguages">
                ...
            </div>
        </div>
        <div class="Slanguages" *ngIf="subtitlesLanguages.length">
            <h4>Subtitles</h4>
            <ul>
                <li *ngFor="let lang of displayedSlanguages">
                    <img [src]="languageFlagMap[lang.toLowerCase()]" [alt]="lang + ' flag'" class="flagicon">
                    {{lang | titlecase}}
                </li>
            </ul>
            <div class="dot3" *ngIf="!showFullFourthSection && subtitlesLanguages.length > visibleSlanguages">
                ...
            </div>
        </div>
    </div>

    <div class="platforms" *ngIf="gameData?.platforms?.length">
        <h3>Platforms</h3>
        <ul>
            <li *ngFor="let p of displayedPlatforms">
                {{p.platform}}
            </li>
        </ul>
        <div class="dot3" *ngIf="!showFullFourthSection && platformsCount > visiblePlatforms">
            ...
        </div>
    </div>

    <div class="cross" *ngIf="gameData">
      <h3>Crossplay</h3>
      <ng-container [ngSwitch]="gameData.crossplatform">
        <strong>
        <p *ngSwitchCase="0">No cross-platform support.</p>

        <p *ngSwitchCase="1">Partial cross-platform support</p>

        <p *ngSwitchCase="2">Full cross-platform avaliable.</p>

        <p *ngSwitchDefault>Singleplayer only.</p>
        </strong>
      </ng-container>
      <p *ngIf="gameData.crossplatform !== null && gameData.crossPlatformException">
        {{gameData.crossPlatformException}}
      </p>
    </div>
</div>

<button id="showmore1" class="optionbuttons" (click)="toggleFourthSection()">
    {{showFullFourthSection ? 'Show Less' : 'Show More'}}
</button>

<hr class="dividerline">

<div class="fifthsection" *ngIf="gameData.pcspec">
    <h3>PC System Requirements</h3>
    <div class="specs">
        <div class="minimum">
            <h4>Minimum</h4>
            <ul>
                <li><strong>OS: </strong>{{gameData.pcspec.minop}}</li>
                <li><strong>CPU: </strong>{{gameData.pcspec.mincpu}}</li>
                <li><strong>RAM: </strong>{{gameData.pcspec.minram}}</li>
                <li><strong>GPU: </strong>{{gameData.pcspec.mingpu}}</li>
                <li><strong>DirectX: </strong>{{gameData.pcspec.mindirectx}}</li>
                <li><strong>Storage: </strong>{{gameData.pcspec.storage}}</li>
                <li *ngIf="gameData.pcspec?.sidenote"><strong>Note: </strong>{{gameData.pcspec.sidenote}}</li>
            </ul>
        </div>

        <div class="recommended" *ngIf="hasRecommendedSpecs">
            <h4>Recommended</h4>
            <ul>
                <li><strong>OS: </strong>{{gameData.pcspec.op}}</li>
                <li><strong>CPU: </strong>{{gameData.pcspec.cpu}}</li>
                <li><strong>RAM: </strong>{{gameData.pcspec.ram}}</li>
                <li><strong>GPU: </strong>{{gameData.pcspec.gpu}}</li>
                <li><strong>DirectX: </strong>{{gameData.pcspec.directx}}</li>
                <li><strong>Storage: </strong>{{gameData.pcspec.storage}}</li>
                <li *ngIf="gameData.pcspec?.sidenote"><strong>Note: </strong>{{gameData.pcspec.sidenote}}</li>
            </ul>
        </div>
    </div>
</div>

<hr class="dividerline">

<div class="sixthsection" *ngIf="gameData?.creators?.length">
        <h3>Crew</h3>
        <div class="crewtable">
        <div class="crewrow header">
            <div class="name" id="Tname">Name</div>
            <div class="role" id="Trole">Role</div>
        </div>
        <div class="crewrow" *ngFor="let member of displayedCrew">
            <div class="name">{{member.firstName}} {{member.lastName}}</div>
            <div class="role">{{member["Games.Creation.field"]}}</div>
        </div>
    </div>
    <div class="dot3" *ngIf="!showAllCrew && platformsCount > visiblePlatforms">
        ...
    </div>
    <br>
    <button class="optionbuttons" (click)="toggleCrew()">
        {{showAllCrew ? 'Show less' : 'Show More'}}
    </button>
</div>

<hr class="dividerline">

<div class="seventhsection" *ngIf="gameData?.actors?.length">
    <h3>Cast</h3>
    <br>
    <div class="castwrapper">
        <button class="arrow left-arrow" (click)="scrollCast('left')">
            <img src="./left-arrow.png" alt="Left Arrow" />
        </button>

        <div class="cast-container" #castContainer>
            <div class="card" *ngFor="let actor of gameData.actors">
                <img apppicturenotfound class="photo" [src]="actor.profilePicture" alt="{{actor.firstName}} {{actor.lastName}}"/>
                <p class="actorname">{{actor.firstName}} {{actor.lastName}}</p>
              <p class="charactername">{{actor["Games.Acting.role"]}}</p>
            </div>
        </div>
        <button class="arrow right-arrow" (click)="scrollCast('right')">
            <img src="./right-arrow.png" alt="Right Arrow"/>
        </button>
    </div>
</div>